<div ng-switch="loaded">
	<div ng-switch-when="true">
		<div class="row">
			<div class="col-md-8">
				<h2>{{repo.name}}</h2>
			</div>
			<div class="col-md-4">
				<p></p>
				<span ng-if="repo.ingestion_date.length > 0">Last Ingested: {{repo.ingestion_date}}</span><span ng-if="repo.analysis_date.length > 0"><br>Last Analyzed: {{repo.analysis_date}}</span>

			</div>
		</div>
		<pre ng-if="debug">{{repo.metrics | json}}</pre>
		<div class="row" ng-if="commits.length > 0">
			<div class="col-md-4">
				<div class="form-group">
					<input type="text" class="form-control" ng-model="search" placeholder="Filter commits">
				</div>
			</div>
			<div class="col-md-8">
				<div class="pull-right">
					<div class="form-group">
						<button ng-click="debug = !debug" class="btn btn-danger">Toggle Debug</button>
						<button class="btn btn-default" ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">Previous</button>
						{{currentPage+1}}/{{numberOfPages()}}
						<button class="btn btn-default" ng-disabled="currentPage >= commits.length/pageSize - 1" ng-click="currentPage=currentPage+1">Next</button>
					</div>
				</div>
			</div>
		</div>
		<div class="row" ng-if="commits.length > 0">
		Searching{{search}}
			<div class="col-md-12">
				
				<div ng-repeat="commit in commits | filter:search | startFrom:currentPage*pageSize | limitTo:pageSize">
					<div class="panel panel-default" ng-class="{'panel-danger':commit.contains_bug}">
						<div class="panel-heading">
							<div class="pull-right">{{commit.author_name}} on {{commit.author_date}}</div>
							<h3 class="panel-title">
								<span ng-if="commit.contains_bug">Possible Bug-inducing: </span>{{commit.commit_hash}}
							</h3>
						</div>
						<div class="panel-body">
							<h4>
								<div class="row">
									<div class="col-md-2" metric="commit.lt">Lines</div>
									<div class="col-md-2" metric="commit.la">Lines Added</div>
									<div class="col-md-2" metric="commit.ld">Lines Deleted</div>
									<div class="col-md-2" metric="commit.nuc"># of unique changes</div>
									<div class="col-md-2" metric="commit.age">Relative Age</div>
									<div class="col-md-2" metric="commit.ndev"># of Devs</div>
								</div>
							</h4>
							<div class="form-group">
								<button class="btn btn-primary" ng-click="show_commit_message = !show_commit_message" type="button">Toggle Message</button>
								<button class="btn btn-default" ng-click="show_commit_diff = !show_commit_diff" type="button">Toggle Diff</button>
							</div>
							<div class="well" ng-if="show_commit_message">{{commit.commit_message}}</div>
							<div class="well" ng-if="show_commit_diff">
								<i>Not Implimented Yet.</i>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row" ng-switch="repoStatus">
			<div class="col-md-12" ng-switch-when='ingested'>
				<div class="panel panel-warning">
					<div class="panel-heading">
						<h3 class="panel-title">Repository ingested, wating for analysis...</h3>
					</div>
					<div class="panel-body">The repository was successfully ingested into the system and it is now waiting for analysis. This may take up an additional 20 minutes.</div>
				</div>
			</div>
			<div class="col-md-12" ng-switch-when='uningested'>
				<div class="panel panel-warning">
					<div class="panel-heading">
						<h3 class="panel-title">Repository scheduled to be ingested and analyzed</h3>
					</div>
					<div class="panel-body">Please wait for the repository to be ingested in to our system. This may take up to 20 minutes.</div>
				</div>
			</div>
		</div>
	</div>
	<h1 ng-switch-when="false">Repository Loading...</h1>
</div>